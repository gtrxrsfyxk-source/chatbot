# צ'אטבוט בנק דיסקונט - מערכת הידע הפנים-ארגונית

## תיאור הפרויקט

צ'אטבוט מתקדם עם תגובות מותאמות אישית לעובדי בנק דיסקונט, המבוסס על נהלי HR מקיפים. המערכת מתמחה ב-5 נושאים עיקריים:
- **יתרת ימי חופשה** - מעקב אישי אחר זכויות וניצול + נוהל HR-205 מקיף
- **ימי מחלה** - 🆕 מעקב צבירה ושימוש + נוהל HR-310 בהתאם לחוק דמי מחלה 1976
- **מתנות לילדים** - סטטוס מתנות לפי גילאי הילדים + נוהל HR-310  
- **משמרות שבועיות** - לוח משמרות אישי לפי תפקיד + נוהל OP-150
- **ארנק דיגיטלי** - זכויות והטבות לחברי ועד עובדים + נוהל HR-420

**🆕 עדכון חדש:** שילוב מלא של נוהל ימי המחלה HR-310 מבוסס על חוק דמי מחלה 1976. המערכת כוללת מידע מפורט על צבירה, תשלומים, זכויות מיוחדות וימי הצהרה לכל עובד.

## טכנולוגיות

- **Backend:** Hono Framework + TypeScript
- **Frontend:** HTML + CSS + Vanilla JavaScript
- **Runtime:** Cloudflare Workers/Pages
- **Development:** Wrangler CLI + Vite

## התקנה והרצה מקומית

### דרישות מוקדמות

1. **Node.js** גרסה 18+ ([הורד כאן](https://nodejs.org))
2. **Git** ([הורד כאן](https://git-scm.com))

### שלבי ההתקנה

#### 1. שכפול הפרויקט
```bash
# אם יש לך גישה ל-Git repository
git clone <repository-url>
cd webapp

# אם הורדת כקובץ ZIP
unzip webapp.zip
cd webapp
```

#### 2. התקנת תלויות
```bash
npm install
```

#### 3. הרצה לפיתוח
```bash
# בנייה ראשונה
npm run build

# הפעלת שרת פיתוח
npm run dev
```

#### 4. פתיחה בדפדפן
פתח את הדפדפן וגש ל: `http://localhost:8788`

## Scripts זמינים

```bash
# פיתוח
npm run dev          # הפעלת שרת פיתוח עם hot-reload
npm run build        # בניית הפרויקט לproduction

# בדיקות
npm run preview      # תצוגה מקדימה של build
npm run test         # בדיקת החיבור (curl)

# פריסה (לעתיד)
npm run deploy       # פריסה לCloudflare Pages
```

## מבנה הפרויקט

```
webapp/
├── src/
│   ├── index.tsx           # קובץ הHono הראשי
│   └── renderer.tsx        # JSX renderer
├── public/
│   └── static/
│       ├── app.js          # JavaScript קדמי
│       └── style.css       # עיצוב
├── dist/                   # קבצים שנבנו (auto-generated)
├── package.json            # תלויות ו-scripts
├── vite.config.ts          # הגדרות Vite
├── wrangler.jsonc          # הגדרות Cloudflare
└── README.md              # המדריך הזה
```

## שימוש במערכת

### עמוד ראשי
- **URL:** `http://localhost:8788/`
- **משתמש ברירת מחדל:** רחל כהן (נציגת מוקד טלפוני)

### בחירת משתמש
- **URL:** `http://localhost:8788/users`
- **3 סוגי משתמשים:** מוקד טלפוני, מנהל סניף, מפתחת תוכנה

### שאלות לדוגמה

#### שאלות אישיות (עם "שלי"):
- "כמה ימי חופשה נשארו לי?"
- "כמה ימי מחלה נשארו לי?" 🆕
- "כמה ימי מחלת ילד נשארו לי?" 🆕
- "מה סטטוס מתנות הילדים שלי?"
- "מה המשמרות שלי השבוע?"

#### שאלות כלליות:
- "נוהל חופשות"
- "נוהל ימי מחלה" 🆕
- "נוהל מתנות"
- "נוהל משמרות"

## נתוני דמו

### רחל כהן - נציגת מוקד טלפוני
- **חופשה:** 10/18 ימים נותרו
- **ימי מחלה:** 37/45 ימים נותרו (18 ימים צבירה שנתית) 🆕
- **ימי מחלת ילד:** 5/8 ימים נותרו (2 ילדים גיל 5,8) 🆕
- **ילדים:** 2 (גילאי 5,8) - זכאים למתנות
- **משמרות:** בוקר/אחה"צ/ערב (32 שעות/שבוע)

### דוד לוי - מנהל סניף
- **חופשה:** 10/25 ימים נותרו
- **ימי מחלה:** 52/60 ימים נותרו (18 ימים צבירה שנתית) 🆕
- **ימי מחלת ילד:** 6/8 ימים נותרו (2 ילדים זכאים גיל 12,16) 🆕
- **ילדים:** 3 (גילאי 12,16,20) - 2 זכאים למתנות
- **משמרות:** שעות קבועות ניהול (44 שעות/שבוע)

### שרה גולדמן - מפתחת תוכנה
- **חופשה:** 10/22 ימים נותרו
- **ימי מחלה:** 75/85 ימים נותרו (18 ימים צבירה שנתית) 🆕
- **ימי מחלת ילד:** 3/4 ימים נותרו (1 ילד גיל 3) 🆕
- **ילדים:** 1 (גיל 3) - זכאי למתנות
- **משמרות:** גמישות ו-remote (40 שעות/שבוע)

## פתרון בעיות נפוצות

### הפורט תפוס
```bash
# Windows
netstat -ano | findstr :8788
taskkill /PID <PID_NUMBER> /F

# macOS/Linux
lsof -ti:8788 | xargs kill -9
```

### שגיאות בבנייה
```bash
# ניקוי וביטול cache
rm -rf node_modules dist .wrangler
npm install
npm run build
```

### בעיות עם wrangler
```bash
# עדכון wrangler
npm install -g wrangler@latest

# או שימוש מקומי
npx wrangler --version
```

## הרחבות עתידיות

- [ ] חיבור למאגר נתונים אמיתי (D1/KV)
- [ ] אימות משתמשים
- [ ] התראות בזמן אמת
- [ ] דוחות אנליטיקה
- [ ] תמיכה בשפות נוספות

## תמיכה

לשאלות וסיוע:
- בדוק את [תיעוד Hono](https://hono.dev)
- בדוק את [תיעוד Cloudflare Workers](https://developers.cloudflare.com/workers)

## רישיון

פרויקט פנימי - בנק דיסקונט

## URLs בסביבת הפיתוח הנוכחית
- **Development Server**: https://3000-i4s2x6a12yu7zyyipuy7g-6532622b.e2b.dev
- **בחירת משתמש**: https://3000-i4s2x6a12yu7zyyipuy7g-6532622b.e2b.dev/users
- **GitHub**: https://github.com/gtrxrsfyxk-source/chatbot

## מאפיינים מתקדמים - נוהל HR-205 מעודכן

### ✅ הושלמו - שילוב מערכת משכנתאות מלא!
- **🏠 נוהל משכנתאות HR-MORTGAGE-510.20:** מבוסס על נוהל רשמי שהועלה על ידי המשתמש
- **🎯 4 רמות זכאות:** זמני (לא זכאי), שעתי (מוגבל), קבוע (מלא), בכיר/טכנולוגיה (VIP)
- **💰 הטבות מותאמות אישית:** ריביות מועדפות, הלוואות נוספות, תנאים מיוחדים לכל דרגה
- **📋 תגובות אישיות מלאות:** "המשכנתא שלי" מציג נתונים מדויקים לכל עובד
- **⚡ כפתורי קישור מהיר:** נוספו למשכנתאות בעמוד הבית
- **🆕 שילוב נוהל ימי מחלה:** HR-310 גרסה 1.0 - מבוסס על נוהל רשמי ו"חוק דמי מחלה 1976"
- **🏥 צבירה והתשלומים:** 1.5 ימים לחודש, עד 90 ימים, תשלום מדורג
- **📊 נתונים אישיים מלאים:** כל עובד רואה צבירה, שימוש, היעדרויות וימי הצהרה
- **⚖️ עמידה בחוק:** הטמעה מלאה של חוק דמי מחלה הישראלי
- **🆕 עדכון לפי נוהל רשמי:** HR-205 גרסה 4.0 - מבוסס על נוהל אמיתי שהועלה
- **שילוב נוהל ארנק דיגיטלי מקיף:** HR-420 גרסה 2.1
- **זכאויות מעודכנות:** 1-5 שנות ותק = 14 ימים (במקום 18)
- **צבירה חודשית:** אפשרות ניצול יחסי של ימי החופשה
- **העברת ימים:** עד 3 שנים במקום 6 ימים
- **בהתאם לחוק:** מינימום 12 ימים לפי חוק החופשה השנתית
- **נתונים אישיים מעודכנים:** כל פרופילי המשתמשים עודכנו לפי הנוהל החדש
- **הבחנה אוטומטית:** המערכת מזהה חברי ועד vs. לא חברי ועד
- **תהליכי אישור:** זמני הגשה, הגבלות, ושימושים מאושרים

### 🔄 בתהליך
- שילוב נוהל מתנות HR-310 (מתוכנן)
- שילוב נוהל משמרות OP-150 (מתוכנן) 
- יצירת קובצי PDF לנהלים

### 📊 סטטיסטיקות מערכת
- **5 סוגי משתמשים** במערכת הדמו (שעתי, קבוע, זמני, מנהל, מפתחת)
- **6 נושאי ידע עיקריים** מכוסים במלואם 
- **4 נהלי HR מלאים:** HR-205 (חופשות) + HR-420 (ארנק דיגיטלי) + HR-310 (ימי מחלה) + HR-MORTGAGE-510.20 (משכנתאות)
- **2 סוגי תשובות:** כלליות + אישיות 
- **100% כיסוי** לשאלות בתחומי חופשות, ימי מחלה, ארנק דיגיטלי ומשכנתאות
- **הבחנה חכמה** בין חברי ועד ללא חברי ועד
- **🏠 מערכת משכנתאות מלאה:** 4 רמות זכאות, הטבות מותאמות, תגובות אישיות
- **🆕 מעקב מחלות מקיף:** צבירה 1.5/חודש, תשלום מדורג, ימי הצהרה

---
**עודכן לאחרונה:** 2025-10-19  
**גרסה:** 7.0.0 - Added Mortgage System for Bank Employees  
**סטטוס:** ✅ פועל עם 4 נהלים מלאים: חופשות HR-205 + ארנק דיגיטלי HR-420 + ימי מחלה HR-310 + משכנתאות HR-MORTGAGE-510.20

## 🏠 חדש בגרסה 7.0.0 - נוהל משכנתאות לעובדי הבנק
**🆕 שילוב מלא של נוהל מתן משכנתאות לעובדי בנק:**
- **נוהל HR-MORTGAGE-510.20:** מבוסס על הנוהל הרשמי שהועלה על ידי המשתמש
- **הטבות מותאמות אישית:** כל עובד מקבל תנאי משכנתא לפי מעמדו ההעסקתי
- **4 רמות זכאות:** עובד זמני (לא זכאי), שעתי (מוגבל), קבוע (מלא), בכיר/טכנולוגיה (VIP)
- **תגובות אישיות:** "המשכנתא שלי", "זכאות משכנתא שלי" עם פרטים מלאים
- **כפתורי קישור מהיר:** נוספו כפתורים למשכנתאות בעמוד הבית

## 🆕 גרסה 6.0.0 - עדכון נתונים לשנת 2025
**🎯 עדכון מקיף של כל המערכת לתאריך הנוכחי:**
- **עדכון תאריכים:** כל הנתונים עודכנו מ-2024 לשנת 2025
- **נוהלי HR:** מספרי הנהלים והמקורות עודכנו לגרסאות 2025
- **נתוני עובדים:** תאריכי גיוס, ניצול חופשות, היסטוריית מחלות
- **משמרות ושעות נוספות:** כל הלוחות עודכנו לאוקטובר 2025
- **בסיס הידע:** כל הנושאים מעודכנים לתאריך הנוכחי (19 אוקטובר 2025)

## ✨ גרסה 5.1.0 - ימי מחלת ילד
**🆕 תמיכה מלאה בשאלות אישיות על ימי מחלת ילד:**
- **זיהוי חכם:** המערכת מבחינה בין "ימי מחלה" כללי לבין "ימי מחלת ילד" ספציפי
- **תשובות אישיות:** כל עובד מקבל מידע על הילדים שלו והזכאות הספציפיות
- **סינון לפי גיל:** רק ילדים עד גיל 16 נחשבים זכאים (מסנן אוטומטית ילדים מבוגרים)
- **מעקב מפורט:** יתרה, שימוש השנה, פירוט היעדרויות עם גילאי הילדים
- **הטבות תפקיד:** הערות מיוחדות למנהלים ועובדי טכנולוגיה

## 🔧 תיקון Git - גרסה 5.0.1
**✅ הושלם:** עדכון קבצי CSS ו-JavaScript ב-Git עם כל השיפורים האחרונים:
- **dist/static/**: הוספו קבצי הבנייה המעודכנים ל-Git
- **CSS מעודכן:** ערכת צבעים ירוקה של דיסקונט, פונטים עבריים, אנימציות
- **JavaScript מעודכן:** תמיכה בימי מחלה, שיפור חוויית משתמש, לוקליזציה עברית
- **תאימות deployment:** כעת המערכת תעבוד נכון גם כשמורידים מ-Git במחשב אחר